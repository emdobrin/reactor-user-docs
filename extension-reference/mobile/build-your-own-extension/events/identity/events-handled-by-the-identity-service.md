# Events Handled by the Identity Extension

## Identity Request Identity

This event is used to retrieve data from the Identity extension in one of the following situations:

- to retrieve the custom visitor identifiers
- to retrieve the Experience Cloud ID (MID)
- to append the visitor identifiers to an URL
- to synchronize a visitor identifier or a list of identifiers with the Adobe Experience Cloud ID Service

This event is generated by:

- Calling the Identity `getIdentifiers` API
- Calling the Identity `getExperienceCloudId` API
- Calling the Identity `appendVisitorInfoForURL` (Android) / `appendToUrl` (iOS) API
- Calling the Identity `syncIdentifier` or `syncIdentifiers` APIs

### Event Details

| **Event Type**               | **Event Source**                      | **Paired** | **Paired Event**                                             |
| :--------------------------- | :------------------------------------ | :--------- | :----------------------------------------------------------- |
| com.adobe.eventType.identity | com.adobe.eventSource.requestIdentity | Yes        | [Link To The Paired Event](../link/to/the/eventpage/andsection) |

### Data Payload Definition

Here are the key-value pairs in this event:

| **Key**             | **Value Type**      | **Optional** | **Description**                                              |
| :------------------ | :------------------ | :----------- | :----------------------------------------------------------- |
| baseurl             | String              | Yes          | The base URL passed as parameter to the `appendVisitorInfoForURL` (Android) / `appendToUrl` (iOS) API |
| visitoridentifiers  | Map<String, String> | Yes          | The visitor identifiers that need to be synced with the Experience Cloud ID Service. The keys of the map are the identifier types and the values are the associated identifiers |
| authenticationstate | Integer             | Yes          | The VisitorID Authentication State represent (Unknown - 0, Authenticated - 1, Logged Out - 2) |
| forcesync           | Boolean             | Yes          | Boolean indicating if this sync call should be sent to the Experience Cloud ID Service regardless of any changes to the identifiers |
| issyncevent         | Boolean             | Yes          | Boolean indicating if this is an Identity sync event         |

### Event Data Example

**Append to URL request**

```json
{
    "baseurl": "https://example.com/path?query=parameter1&other=parameter2"
}
```

### Event Data Example

**Sync identifiers request**

```json
{
    "visitoridentifiers": {
        "idtype1" : "id1",
        "idtype2" : "id2"
    },
    "authenticationstate" : 1,
    "forcesync" : false,
    "issyncevent" : true
}
```

### Event Data Example

**Experience Cloud ID request**

There are no key-value pairs for this event.

### Event Data Example

**Identifiers request**

There are no key-value pairs for this event.



## Generic Identity Request Content

This event is used to set identifiers in the Identity extension and it is generated by:

- Calling the MobileCore (Android) / ACPCore (iOS) `setAdvertisingIdentifier` API
- Calling the MobileCore (Android) / ACPCore (iOS)  `setPushIdentifier` API

### Event Details

| **Event Type**                       | **Event Source**                      | **Paired** | **Paired Event**                                             |
| :----------------------------------- | :------------------------------------ | :--------- | :----------------------------------------------------------- |
| com.adobe.eventType.generic.identity | com.adobe.eventSource.requestIdentity | Yes        | [Link To The Paired Event](../link/to/the/eventpage/andsection) |

### Data Payload Definition

Here are the key-value pairs in this event:

| **Key**               | **Value Type** | **Optional** | **Description**                                              |
| :-------------------- | :------------- | :----------- | :----------------------------------------------------------- |
| advertisingidentifier | String         | Yes          | The value of the Advertising Identifier for the mobile device that needs to be set in the SDK. This key will be populated when `setAdvertisingIdentifier` API is called. |
| pushidentifier        | String         | Yes          | The value of the Push Identifier that needs to be set. This key will be populated when `setPushIdentifier` API is called |

### Event Data Example

**Set Advertising Identifier request**

```json
{
    "advertisingidentifier": "advertisingIdExample"
}
```

### Event Data Example

**Set Push Identifier request**

```json
{
    "pushidentifier": "pushIdExample"
}
```

